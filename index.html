<!DOCTYPE html>
<html>
  <head>
    <title>Wake up！大藝術家</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="main.css" />
    <script type="text/javascript" src="main.js"></script>
  </head>

  <body onload="setting()">
    <div class="header"></div>

    <div class="topbar">
      <input type="button" id="reset" value="Reset" onclick="reset()"/>

      <input type="button" id="previous" value="上一步" onclick="previous()"/>
      <input type="button" id="next" value="下一步" onclick="next()"/>
      <!--<a href="#" download="img.png" onclick="this.href=canvas.toDataURL();" >下載</a>-->


      <input type="button" id="download2" value="Download" onclick="downloadimg()"/>
      <a id="download" href="#" download="img.png" onclick="this.href=canvas.toDataURL();"></a>
      <labe style="color:#e3e3e3;">Width：<input type="text" id="setwidth"/></label>
      <labe style="color:#e3e3e3;">Height：<input type="text" id="setheight"/></label>
      <input type="button" id="setsize" value="Set Canvas Size" onclick="setsize()"/>

      

      <form name="dowhatForm"> 
        <input type="checkbox" id="checkdraw" name="dowhatGroup" value="1" checked="" onclick="dowhat(this)">Draw Now
        <input type="checkbox" id="checkshape" name="dowhatGroup" onclick="dowhat(this)">Shape Now
      </form>

    </div>


    <div class="Sidebar">
        <canvas width="820px" height="600px" id="cvs" onmouseup="up(event)" onmousedown="down(event)" onmousemove="mouseMove(event)" tabindex="0"></canvas>
    </div>

    <input type="image" src="https://i.imgur.com/BFYaz6O.png" style="width: 375px;height: 10px">

    <div class="body">
       <div id="buttons">
         <div id='red' class="color" onmousedown="red(event)"></div>
         <div id='blue' class="color" onmousedown="blue(event)"></div>
         <div id='green' class="color" onmousedown="green(event)"></div>
         <div id='purple' class="color" onmousedown="purple(event)"></div>
         <div id='yellow' class="color" onmousedown="yellow(event)"></div>
         <div id='orange' class="color" onmousedown="orange(event)"></div>
         <div id='pink' class="color" onmousedown="pink(event)"></div>
         <div id='black' class="color" onmousedown="black(event)"></div>
         <div id='white' class="color" onmousedown="white(event)"></div>
         <div id='display' class="color"></div>
        </div>
    </div>

  
    <input type='button' id='choose' value='Choose Your Color' onclick="showcolorpicker()"/>
    
    <div class="picker" oninput="displaychange()" onchange="displaychange()">  
      <div id="redtext" style="display:none">Red</div> <input type="range" min="0" max="255" step="1" id="colorpickerred" value="115" style="display:none">
      <div id="greentext" style="display:none">Green</div> <input type="range" min="0" max="255" step="1" id="colorpickergreen" value="10" style="display:none">
      <div id="bluetext" style="display:none">Blue</div> <input type="range" min="0" max="255" step="1" id="colorpickerblue" value="162" style="display:none">
    </div>


    <canvas id="color-picker" style="display: none;"></canvas>


    <input type="image" src="https://i.imgur.com/BFYaz6O.png" style="width: 375px;height: 10px">


    <div class="body">
         <div id="buttonsize">
           <div id="one" class="size" onclick="setpensize_one()">1</div>
           <div id="two" class="size" onclick="setpensize_two()">2</div>
           <div id="three" class="size" onclick="setpensize_three()">3</div>
           <div id='five' class="size" onclick="setpensize_five()">5</div>
           <div id='ten' class="size" onclick="setpensize_ten()">10</div>
           <div id='fifteen' class="size" onclick="setpensize_fifteen()">15</div>
           <div id='twenty' class="size" onclick="setpensize_twenty()">20</div>  
          <div id='change' class="size">?</div>
        </div>
    </div>
    
    <div></div>
    <input type='button' id='choose' value='Choose Pen Size' onclick="showpensize()"/>

    <div id="pensizetext" style="display: none">Pen Size</div>
    <input id="pensize" type="range" min="1" max="30" value="1" style="display:none" onclick="changepensize(event)"/>

    <input type="image" src="https://i.imgur.com/BFYaz6O.png" style="width: 375px;height: 10px">

    <div class="body">
      <!--<input type="image" src="https://i.imgur.com/1dsWaW0.png" class="shape" id="triangle" onclick="draw_triangle()">
      <input type="image" src="https://i.imgur.com/OWnELzY.png" class="shape" id="heart" onclick="draw_heart()">
      
      <input type="image" src="https://i.imgur.com/pIij7ub.png" class="shape" id="star" onclick="draw_star()">-->
      <input type="image" src="https://i.imgur.com/qYahEu7.png" class="shape" id="rectangle" onclick="draw_rectangle()">
      <image type="image" src="https://i.imgur.com/U3dWlOM.png" class="shape" id="circle" onclick="draw_circle()">
      <input type="image" src="https://i.imgur.com/MX650uE.png" class="shape" id="squre" onclick="draw_squre()">
      
    </div>

      
        <!--rectangle-->
        <div id="rectanglewidthtext" style="display: none;">Rectangle Width = <span id="widthnum"></span></div>
        <input id="shapewidth" type="range" min="1" max="300" value="100" style="display:none;" oninput="show_change_shape_size()" onchange="show_change_shape_size()" />

        <div id ="rectangleheighttext" style="display: none;">Rectangle Height = <span id="heightnum"></span></div>
        <input id="shapeheight" type="range" min="1" max="900" value="300" style="display:none;" oninput="show_change_shape_size()" onchange="show_change_shape_size()"/>


        <!--circle-->
        <div id ="circlelongtext" style="display: none;">Circle Semi-major = <span id="longnum"></span></div>
        <input id="circlelong" type="range" min="1" max="900" value="75" style="display:none;" oninput="show_change_shape_size()" onchange="show_change_shape_size()"/>

        <div id ="circleshorttext" style="display: none;">Circle Semi-minor axes = <span id="shortnum"></span></div>
        <input id="circleshort" type="range" min="1" max="900" value="75" style="display:none;" oninput="show_change_shape_size()" onchange="show_change_shape_size()"/>


        <!--squre-->
        <div id ="squresidetext" style="display: none;">Squre Side Length = <span id="sidenum"></span></div>
        <input id="squreside" type="range" min="1" max="500" value="100" style="display:none;" oninput="show_change_shape_size()" onchange="show_change_shape_size()"/>




      <input type="image" src="https://i.imgur.com/BFYaz6O.png" style="width: 375px;height: 10px">


    <form>
      <label for="normal">Normal</label>
      <input type="radio" name="sex" id="normal" checked  onclick="feat_n()" />
      <br/>
      <label for="Hsymmetry">Horizontal symmetry</label>
      <input type="radio" name="sex" id="Hsymmetry"  onclick="feat_H()" />
      <br />
      <label for="Vsymmetry">Vertical symmetry</label>
      <input type="radio" name="sex" id="Vsymmetry" onclick="feat_V()" />
      <br/>
      <label for="pen_circle">pen_circle</label>
      <input type="radio" name="sex" id="pen_circle" onclick="feat_C()" />
      <br /> 
      <label for="pen_squart">pen_squart</label>
      <input type="radio" name="sex" id="pen_squart" onclick="feat_S()" />
      <br /> 
    </form>



    <SCRIPT>
    /*var canvas = document.getElementById("cvs");
    canvas.addEventListener('keydown', doKeyDown, true);
    ctx = canvas.getContext("2d");
    var whatshape;
    //rectangle
    var originalwidth = 100;
    var originalheight = 300;
    var newwidth = 100;
    var newheight = 300;
    //circle
    var original_semiminor = 75; //半長軸
    var original_semiminor_axes =75; //半短軸
    var new_semiminor = 75;
    var new_semiminor_axes = 75;
    //squre
    var original_squrewidth = 100;
    var original_squreheight = 100;
    var new_squrewidth = 100;
    var new_squreheight = 100;


    var widthnum = document.getElementById("widthnum");
    var heightnum = document.getElementById("heightnum");
    widthnum.innerHTML = 100;
    heightnum.innerHTML = 300;
    var longnum = document.getElementById("longnum");
    var shortnum = document.getElementById("shortnum");
    longnum.innerHTML = 75;
    shortnum.innerHTML = 75;
    var sidenum = document.getElementById("sidenum");
    sidenum.innerHTML = 100;


    function draw_triangle()
    {
        whatshape = 1;
        ctx.beginPath();
        ctx.moveTo(75,50);
        ctx.lineTo(20,200);
        ctx.lineTo(130,200);
        ctx.fill();
    }
    function draw_rectangle()
    {
        x = 100;
        y = 100;
        originalwidth = 100;
        originalheight = 300;
        newwidth = 100;
        newheight = 300;
        whatshape = 2;
        var red = document.getElementById("colorpickerred").value,
        green = document.getElementById("colorpickergreen").value,
        blue = document.getElementById("colorpickerblue").value;
        ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
        ctx.fillRect(x, y, originalwidth, originalheight);
        var changeshapewidth = document.getElementById("shapewidth");
        var changeshapeheight = document.getElementById("shapeheight");
        var rectanglewidthtext = document.getElementById("rectanglewidthtext");
        var rectangleheighttext = document.getElementById("rectangleheighttext");
        changeshapewidth.style.display = "block";
        changeshapeheight.style.display = "block";
        rectanglewidthtext.style.display = "block";
        rectangleheighttext.style.display = "block";
    }
    function draw_circle()
    {
        x = 100;
        y = 100;
        whatshape = 3;
        var red = document.getElementById("colorpickerred").value,
        green = document.getElementById("colorpickergreen").value,
        blue = document.getElementById("colorpickerblue").value;
        ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
        ctx.beginPath();
        ctx.ellipse(x, y, original_semiminor, original_semiminor_axes, 0, 0, 2 * Math.PI);
        ctx.closePath();
        ctx.stroke();
        ctx.fill();
        var changecirclelong = document.getElementById("circlelong");
        var changecircleshort = document.getElementById("circleshort");
        var circlelongtext = document.getElementById("circlelongtext");
        var circleshorttext = document.getElementById("circleshorttext");
        changecirclelong.style.display = "block";
        changecircleshort.style.display = "block";
        circlelongtext.style.display = "block";
        circleshorttext.style.display = "block";
    }
    /*function draw_heart()
    {
        whatshape = 4;      
        ctx.beginPath();
        ctx.moveTo(75, 40);
        ctx.bezierCurveTo(75, 37, 70, 25, 50, 25);
        ctx.bezierCurveTo(20, 25, 20, 62.5, 20, 62.5);
        ctx.bezierCurveTo(20, 80, 40, 102, 75, 120);
        ctx.bezierCurveTo(110, 102, 130, 80, 130, 62.5);
        ctx.bezierCurveTo(130, 62.5, 130, 25, 100, 25);
        ctx.bezierCurveTo(85, 25, 75, 37, 75, 40);
        ctx.closePath();
        ctx.fill();
    }
    function draw_squre()
    {
        whatshape = 5;
        x = 100;
        y = 100;
        original_squrewidth = 100;
        original_squreheight = 100;
        new_squrewidth = 100;
        new_squreheight = 100;
        var red = document.getElementById("colorpickerred").value,
            green = document.getElementById("colorpickergreen").value,
            blue = document.getElementById("colorpickerblue").value;
        ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
        ctx.fillRect(x, y, original_squrewidth, original_squreheight);
        var changeside = document.getElementById("squreside");
        var changesidetext = document.getElementById("squresidetext");
        changeside.style.display = "block";
        changesidetext.style.display = "block";
    }
    /*function draw_star()
    {
        whatshape = 6;
        ctx.beginPath();
        ctx.moveTo(108, 0);
        ctx.lineTo(141, 70);
        ctx.lineTo(218, 78.3);
        ctx.lineTo(162, 131);
        ctx.lineTo(175, 205);
        ctx.lineTo(108, 170);
        ctx.lineTo(41.2, 205);
        ctx.lineTo(55, 131);
        ctx.lineTo(1, 78);
        ctx.lineTo(75, 68);
        ctx.lineTo(108, 0);
        ctx.closePath();
        ctx.fill();
    }
    var x = 100;
    var y = 100;
    var drawcheck = document.getElementById("checkdraw");
    var shapecheck = document.getElementById("checkshape");
    var img;
    
    function dowhat(elem)
    {
        var group = document.dowhatForm.dowhatGroup;
        for (var i=0 ; i < group.length ; i++) {
            if (group[i] != elem) {
                group[i].checked = false;
            }
        }
        if(!drawcheck.checked)
        {
          img = ctx.getImageData(0, 0, canvas.width, canvas.height);
        }
    }
    function doKeyDown(e)
    {
      //====================
      //  THE W KEY
      //====================
      var red = document.getElementById("colorpickerred").value,
          green = document.getElementById("colorpickergreen").value,
          blue = document.getElementById("colorpickerblue").value;
      
      if (e.keyCode == 87)
      {
        clearCanvas();
        ctx.putImageData(img, 0, 0);
        
        if(whatshape == 2)
        {
          y = y - 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x, y, newwidth, newheight);
        }
        if(whatshape == 3)
        {
          y = y - 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.beginPath();
          ctx.ellipse(x, y, new_semiminor, new_semiminor_axes, 0, 0, 2 * Math.PI);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();
        }
        if(whatshape == 5)
        {
          y = y - 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x,y, new_squrewidth, new_squreheight);
        }
        
      }
      //====================
      //  THE S KEY
      //====================
      if (e.keyCode == 83)
      {
        clearCanvas();
        ctx.putImageData(img, 0, 0);
        if(whatshape == 2)
        {
          y = y + 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x, y, newwidth, newheight);
        }
        if(whatshape == 3)
        {
          y = y + 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.beginPath();
          ctx.ellipse(x, y, new_semiminor, new_semiminor_axes, 0, 0, 2 * Math.PI);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();
        }
        if(whatshape == 5)
        {
          y = y + 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x,y, new_squrewidth, new_squreheight);
        }
        
      }
      //====================
      //  THE A KEY
      //====================
      if (e.keyCode == 65)
      {
        clearCanvas();
        ctx.putImageData(img, 0, 0);
        if(whatshape == 2)
        {
          x = x - 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x, y, newwidth, newheight);
        }
        if(whatshape == 3)
        {
          x = x - 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.beginPath();
          ctx.ellipse(x, y, new_semiminor, new_semiminor_axes, 0, 0, 2 * Math.PI);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();
        }
        if(whatshape == 5)
        {
          x = x - 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x,y, new_squrewidth, new_squreheight);
        }
        
      }
      //====================
      //  THE D KEY
      //====================
      if (e.keyCode == 68)
      {
        clearCanvas();
        ctx.putImageData(img, 0, 0);
        if(whatshape == 2)
        {
          x = x + 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x, y, newwidth, newheight);
        }
        if(whatshape == 3)
        {
          x = x + 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.beginPath();
          ctx.ellipse(x, y, new_semiminor, new_semiminor_axes, 0, 0, 2 * Math.PI);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();
        }
        if(whatshape == 5)
        {
          x = x + 10;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x,y, new_squrewidth, new_squreheight);
        }
        
      }
      if(e.keyCode == 13)
      {
        
        img = ctx.getImageData(0, 0, canvas.width, canvas.height);
        alert("圖形已被儲存");
        if(whatshape == 2)
        {
            var changeshapewidth = document.getElementById("shapewidth");
            var changeshapeheight = document.getElementById("shapeheight");
            var rectanglewidthtext = document.getElementById("rectanglewidthtext");
            var rectangleheighttext = document.getElementById("rectangleheighttext");
            changeshapewidth.style.display = "none";
            changeshapeheight.style.display = "none";
            rectanglewidthtext.style.display = "none";
            rectangleheighttext.style.display = "none";
        }
        
        if(whatshape == 3)
        {
            var circlelong = document.getElementById("circlelong");
            var circleshort = document.getElementById("circleshort");
            var circlelongtext = document.getElementById("circlelongtext");
            var circleshorttext = document.getElementById("circleshorttext");
            circlelong.style.display = "none";
            circleshort.style.display = "none";
            circlelongtext.style.display = "none";
            circleshorttext.style.display = "none";
        }

        if(whatshape == 5)
        {
            var squreside = document.getElementById("squreside");
            var squresidetext = document.getElementById("squresidetext");
            squreside.style.display = "none";
            squresidetext.style.display = "none";
        }
        
      }
    }
    function clearCanvas() {
      canvas.width = canvas.width;
    }
    function show_change_shape_size()
    {   
        
        clearCanvas();
        ctx.putImageData(img, 0, 0);
        if(whatshape == 2)
        {
          
          var changeshapewidth = document.getElementById("shapewidth");
          var changeshapeheight = document.getElementById("shapeheight");
          var widthnum = document.getElementById("widthnum");
          var heightnum = document.getElementById("heightnum");
          widthnum.innerHTML = changeshapewidth.value;
          heightnum.innerHTML = changeshapeheight.value;
          var red = document.getElementById("colorpickerred").value,
              green = document.getElementById("colorpickergreen").value,
              blue = document.getElementById("colorpickerblue").value;
      
          newwidth = changeshapewidth.value;
          newheight = changeshapeheight.value;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x,y,newwidth, newheight);
        }
        
        if(whatshape == 3)
        {
          var changecirclelong = document.getElementById("circlelong");
          var changecircleshort = document.getElementById("circleshort");
          var longnum = document.getElementById("longnum");
          var shortnum = document.getElementById("shortnum");
          longnum.innerHTML = changecirclelong.value;
          shortnum.innerHTML = changecircleshort.value;
          var red = document.getElementById("colorpickerred").value,
              green = document.getElementById("colorpickergreen").value,
              blue = document.getElementById("colorpickerblue").value;
          new_semiminor = changecirclelong.value;
          new_semiminor_axes = changecircleshort.value;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.beginPath();
          ctx.ellipse(x, y, new_semiminor, new_semiminor_axes, 0, 0, 2 * Math.PI);
          ctx.closePath();
          ctx.stroke();
          ctx.fill();
        }


        if(whatshape == 5)
        {
          var changesqureside = document.getElementById("squreside");
          var sidenum = document.getElementById("sidenum");
          sidenum.innerHTML = changesqureside.value;
        
          var red = document.getElementById("colorpickerred").value,
              green = document.getElementById("colorpickergreen").value,
              blue = document.getElementById("colorpickerblue").value;
      
          new_squrewidth = changesqureside.value;
          new_squreheight = changesqureside.value;
          ctx.fillStyle = "rgb(" + red + ", " + green + ", " + blue +")";
          ctx.fillRect(x,y,new_squrewidth, new_squrewidth);
        }
        
    }/*
    
  </SCRIPT>
  
  <script type="text/javascript" src="colorpicker.js"></script>

  </body>

</html>
